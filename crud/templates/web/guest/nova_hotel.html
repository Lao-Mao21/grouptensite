{% extends 'base/base_web.html' %}

{% block title %}Landing Page{% endblock title %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  }
  .font-heading {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    font-weight: 600;
  }
  .error-message {
    display: none;
    color: #ef4444;
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }
  .field-error {
    border-color: #ef4444 !important;
  }
  .field-error + .error-message {
    display: block;
  }
  .alert {
    padding: 0.75rem 1rem;
    margin-bottom: 1rem;
    border-radius: 0.375rem;
  }
  .alert-error {
    background-color: #fee2e2;
    border: 1px solid #ef4444;
    color: #b91c1c;
  }
  .alert-success {
    background-color: #dcfce7;
    border: 1px solid #22c55e;
    color: #15803d;
  }
</style>
{% endblock %}

{% block content %}
{% include 'attachments/navbar.html' %}

<!-- Django Messages -->
{% if messages %}
<div class="fixed top-20 right-4 z-50 w-96">
  {% for message in messages %}
  <div class="alert {% if message.tags == 'error' %}alert-error{% else %}alert-success{% endif %} mb-2 transform transition-transform duration-500 ease-in-out animate-slide-in">
    {{ message }}
  </div>
  {% endfor %}
</div>
{% endif %}

<div class="relative w-full h-auto">
  {% comment %} home section {% endcomment %}
  <img src="{{ MEDIA_URL }}unsplash-img.jpg" alt="landing_img.jpg" class="w-full aspect-[14/6] object-cover"/>
  <!-- Transparent color overlay -->
  <div id="home" class="absolute inset-0 bg-orange-400/50 backdrop-blur-xs">
    <div class="flex flex-col my-auto h-full px-4 md:px-24 items-center md:items-start justify-center h-full text-white text-center md:text-left">
      <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold">Your Gateway to Blissful Retreats</h1>
      <p class="text-base sm:text-lg lg:text-xl mt-3 sm:mt-4 max-w-md lg:max-w-4xl">
        Welcome to Nova Doors Hotel - your gateway to comfort, elegance, and unforgettable stay. Experience modern luxury
        and personalized service in the heart of the city, where every stay feels like a home away from home.
      </p>
    </div>
  </div>
</div>
<div class="relative w-full min-h-screen">
  {% comment %} about {% endcomment %}
  <div id="about" class="flex justify-center items-center h-full">
    <div class="flex-col my-36 mx-auto text-center text-black">
      <h1 class="text-5xl font-bold">A FULL HOSPITALITY SERVICE</h1>
      <p class="text-2xl mt-4 font-sans max-w-4xl">
        We offer a serene retreat where modern comfort meets warm hospitality. 
        Our personalized service and elegant accommodations ensure every guest feels at home. 
        Experience a perfect blend of luxury and tranquility in the heart of the city.
      </p>
    </div>
  </div>
  {% comment %} room section {% endcomment %}
  <div id="rooms" class="flex-col mx-auto text-center text-black">
    <h1 class="text-5xl text-center font-bold"> OUR ROOMS </h1>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 px-4 md:px-12 py-8"> <!-- responsive grid -->
      <div class="text-black text-center">
        <img src="{{ MEDIA_URL }}single.jpg" alt="single" class="aspect-[3/4] border border-transparent shadow-md rounded-2xl
        transition-transform duration-500 ease-in-out hover:scale-105">
        <div class="mt-4 space-y-3">
          <h2 class="font-bold text-3xl">SINGLE</h2>
          <p>Spacious and comfortable, our Family Rooms are designed to accommodate your loved ones with ease. Enjoy thoughtful amenities and a cozy atmosphere perfect for creating lasting memories together</p>
        </div>
      </div>
      <div class="text-black text-center">
        <img src="{{ MEDIA_URL }}double.jpg" alt="double" class="aspect-[3/4] border border-transparent shadow-md rounded-2xl 
        transition-transform duration-500 ease-in-out hover:scale-105">
        <div class="mt-4 space-y-3">
          <h2 class="font-bold text-3xl">DOUBLE</h2>
          <p>Experience the pinnacle of luxury in our VIP Rooms, featuring exclusive amenities and personalized services. Designed for discerning guests seeking privacy, elegance, and exceptional comfort</p>
        </div>
      </div>
      <div class="text-black text-center">
        <img src="{{ MEDIA_URL }}suite.jpg" alt="suite" class="aspect-[3/4] border border-transparent shadow-md rounded-2xl
        transition-transform duration-500 ease-in-out hover:scale-105">
        <div class="mt-4 space-y-3">
          <h2 class="font-bold text-3xl">SUITE</h2>
          <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Quibusdam, eum atque necessitatibus error ad commodi quod libero ut explicabo assumenda. Illum facere autem, eum perspiciatis quos quasi nulla rerum beatae!</p>
        </div>
      </div>
      <div class="text-black text-center">
        <img src="{{ MEDIA_URL }}deluxe.jpg" alt="deluxe" class="aspect-[3/4] border border-transparent shadow-md rounded-2xl
        transition-transform duration-500 ease-in-out hover:scale-105">
        <div class="mt-4 space-y-3">
          <h2 class="font-bold text-3xl">DELUXE</h2>
          <p>Our Deluxe Rooms offer a stylish blend of sophistication and convenience. Relax in a beautifully appointed space with modern features that cater to your every need</p>
        </div>
      </div>
    </div>
    <div class="flex justify-center mt-9 mb-32">
      {% if request.session.guest_id %}
        <a href="{% url 'booking_web' %}" class="block py-2 px-4 border bg-orange-200 rounded-full w-fit md:border-0 font-bold text-white md:hover:text-black">BOOK NOW</a>
      {% else %}
        <button onclick="document.getElementById('openLoginBtn').click()" class="block py-2 px-4 border bg-orange-200 rounded-full w-fit md:border-0 font-bold text-white md:hover:text-black">BOOK NOW</button>
      {% endif %}
    </div>
  </div>
  {% comment %} review section {% endcomment %}
  <div class="flex-col mx-auto text-center text-black">
    <h1 class="text-5xl text-center font-bold"> REVIEWS </h1>
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 md:gap-16 xl:gap-32 px-4 md:px-16 xl:px-40 pt-12 pb-32"> <!-- responsive grid -->
      <div class="text-black text-left border border-gray-200 bg-white shadow-md rounded-xl">
        <div class="mt-4space-y-3 p-6">
          <div class="flex space-x-1 pb-32 text-yellow-400">
            <!-- Filled stars -->
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <p class="underline pl-24 text-gray-900">04/14/2025</p>
          </div>
          <h2 class="font-bold text-lg">Jhon Elred Vigo</h2>
          <p>The stay was absolutely wonderful, the rooms were spotless and beautifully decorated. The staff made me feel truly valued with their warm and attentive service.</p>
        </div>
      </div>
      <div class="text-black text-left border border-gray-200 bg-white shadow-md rounded-xl">
        <div class="mt-4 space-y-3 p-6">
          <div class="flex space-x-1 pb-32 text-yellow-400">
            <!-- Filled stars -->
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <p class="underline pl-24 text-gray-900">04/14/2025</p>
          </div>
          <h2 class="font-bold text-lg">Jonas Buenavides</h2>
          <p>A perfect getaway spot with a peaceful ambiance and stunning views. I loved how the hotel balanced luxury with comfort for a memorable experience.</p>
        </div>
      </div>
      <div class="text-black text-left border border-gray-200 bg-white shadow-md rounded-xl">
        <div class="mt-4 py-3 p-6">
          <div class="flex space-x-1 pb-32 text-yellow-400">
            <!-- Filled stars -->
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.956a1 1 0 00.95.69h4.179c.969 0 1.371 1.24.588 1.81l-3.39 2.462a1 1 0 00-.364 1.118l1.286 3.956c.3.921-.755 1.688-1.54 1.118l-3.39-2.462a1 1 0 00-1.175 0l-3.39 2.462c-.784.57-1.839-.197-1.54-1.118l1.286-3.956a1 1 0 00-.364-1.118L2.98 9.383c-.783-.57-.38-1.81.588-1.81h4.179a1 1 0 00.95-.69l1.286-3.956z"></path>
            </svg> 
            <p class="underline pl-24 text-gray-900">04/14/2025</p>
          </div>
          <h2 class="font-bold text-lg">Hazel Diwa</h2>
          <p>Exceptional hospitality and top-notch amenities made my stay unforgettable. I highly recommend this hotel for anyone seeking relaxation and elegance.</p>
        </div>
      </div>
    </div>
  </div>
</div>
{% comment %} location section {% endcomment %}
<div class="flex-col mx-auto text-center text-black">
  <h1 class="text-5xl text-center font-bold"> WE ARE LOCATED AT </h1>
  <div class="flex justify-center align-center px-4 md:px-40 pt-12 pb-32"> <!-- modify flex -->
      <div class="text-black text-left border border-gray-200 bg-white shadow-md rounded-xl">
        <div class="mt-4space-y-3 p-6">
          <img src="{{ MEDIA_URL }}location.png" class="size-full" alt="location"/>
        </div>
      </div>
    </div>
</div>

{% comment %} contact section {% endcomment %}
<div id="contact" class="flex flex-col items-center justify-center py-16">
  <h1 class="text-5xl font-bold mb-8">CONTACT US</h1>
  {% comment %} Zapier Feedback Form {% endcomment %}
  <div id="zapier-feedback" class="relatie pointer-events-auto z-60 bg-white p-8 w-full max-w-md mx-auto">
    <form id="zapierFeedbackForm" class="space-y-4">
      <div>
        <label for="zapier_name" class="block text-gray-700 mb-1">Name</label>
        <input 
          type="text" 
          id="zapier_name" 
          name="name" 
          class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400"
          required
        >
      </div>
      <div>
        <label for="zapier_email" class="block text-gray-700 mb-1">Email</label>
        <input 
          type="email" 
          id="zapier_email" 
          name="email" 
          class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400"
          required
        >
      </div>
      <div>
        <label for="zapier_feedback" class="block text-gray-700 mb-1">Feedback</label>
        <textarea 
          id="zapier_feedback" 
          name="feedback" 
          rows="4"
          class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400"
          required
        ></textarea>
      </div>
      <button 
        type="submit"
        class="w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200"
      >
        Submit Feedback
      </button>
    </form>
    <div id="feedback-status" class="mt-4 text-center hidden">
      <p class="text-green-600">Thank you for your feedback!</p>
    </div>
  </div>
  <p class="text-xl max-w-4xl text-center mb-12">
    For any inquiries or special requests, please contact us at +63-9094848123. Our dedicated team is available 24 hours a day to assist you and ensure your stay is exceptional. Whether you need help with reservations or local recommendations, we're here to make your experience seamless and enjoyable.
  </p>
  <div class="flex space-x-8 mb-24">
    <a href="#" class="text-gray-500 hover:text-gray-900 transition-colors">
      <i class="fa-brands fa-square-facebook text-4xl"></i>
      <span class="sr-only">Facebook page</span>
    </a>
    <a href="#" class="text-gray-500 hover:text-gray-900 transition-colors">
      <i class="fa-brands fa-square-instagram text-4xl"></i>
      <span class="sr-only">Instagram</span>
    </a>
    <a href="#" class="text-gray-500 hover:text-gray-900 transition-colors">
      <i class="fa-brands fa-x-twitter text-4xl"></i>
      <span class="sr-only">X</span>
    </a>
  </div>
</div>

{% comment %} FAQ {% endcomment %}
<div id="faq" class="flex-col mx-auto text-center text-black">
  <h1 class="text-5xl text-center font-bold mb-8">Frequently Asked Questions</h1>
  <div class="flex flex-col px-10 md:px-40 pt-12 pb-32 space-y-8"> <!-- spacing between items -->
    <!-- FAQ Item 1 -->
    <div class="relative text-black text-left border-b border-gray-300 pb-4">
      <h2 class="flex items-center justify-between cursor-pointer transition-transform duration-500 ease-in-out" 
          onclick="toggleFAQ(this)">
        <span class="mr-2 font-bold text-xl">What amenities are included in the rooms?</span>
        <i class="fa-solid fa-arrow-down p-3 bg-gray-200 transition-transform duration-300 ease-in-out transform" 
           ></i>
      </h2>
      <p class="mt-2 text-lg hidden transition-all duration-300">
        All rooms come equipped with free Wi-Fi, flat-screen TVs, air conditioning, and 24-hour room service. 
        Additional amenities vary by room type to enhance your stay.
      </p>
    </div>
    <!-- FAQ Item 2 -->
    <div class="relative text-black text-left border-b border-gray-300 pb-4">
      <h2 class="flex items-center justify-between cursor-pointer transition-transform duration-500 ease-in-out" 
          onclick="toggleFAQ(this)">
        <span class="mr-2 font-bold text-xl">Does the hotel offer parking facilities?</span>
        <i class="fa-solid fa-arrow-down p-3 bg-gray-200 transition-transform duration-300 ease-in-out transform"></i>
      </h2>
      <p class="mt-2 text-lg hidden transition-all duration-300">
        Yes, secure on-site parking is available for all guests at no extra charge. 
        Valet parking service is also offered for your convenience.
      </p>
    </div>
    <!-- FAQ Item 3 -->
    <div class="relative text-black text-left border-b border-gray-300 pb-4">
      <h2 class="flex items-center justify-between cursor-pointer transition-transform duration-500 ease-in-out" 
          onclick="toggleFAQ(this)">
        <span class="mr-2 font-bold text-xl">Is breakfast included with the room booking?</span>
        <i class="fa-solid fa-arrow-down p-3 bg-gray-200 transition-transform duration-300 ease-in-out transform"></i>
      </h2>
      <p class="mt-2 text-lg hidden transition-all duration-300">
        A complimentary breakfast buffet is available for guests who book directly through our website. 
        Alternatively, a range of delicious breakfast options can be ordered à la carte.
      </p>
    </div>
    <!-- FAQ Item 4 -->
    <div class="relative text-black text-left border-b border-gray-300 pb-4">
      <h2 class="flex items-center justify-between cursor-pointer transition-transform duration-500 ease-in-out" 
          onclick="toggleFAQ(this)">
        <span class="mr-2 font-bold text-xl">Are pets allowed at the hotel?</span>
        <i class="fa-solid fa-arrow-down p-3 bg-gray-200 transition-transform duration-300 ease-in-out transform"></i>
      </h2>
      <p class="mt-2 text-lg hidden transition-all duration-300">
        Yes, pets are allowed in designated rooms. Please contact us in advance for pet policies and fees.
      </p>
    </div>
    <!-- FAQ Item 5 -->
    <div class="relative text-black text-left border-b border-gray-300 pb-4">
      <h2 class="flex items-center justify-between cursor-pointer transition-transform duration-500 ease-in-out" 
          onclick="toggleFAQ(this)">
        <span class="mr-2 font-bold text-xl">What is the cancellation policy?</span>
        <i class="fa-solid fa-arrow-down p-3 bg-gray-200 transition-transform duration-300 ease-in-out transform"></i>
      </h2>
      <p class="mt-2 text-lg hidden transition-all duration-300">
        Reservations can be canceled free of charge up to 48 hours before the scheduled arrival date. 
        For cancellations within 48 hours, a fee equal to one night's stay will apply.
      </p>
    </div>
  </div>
</div>

<!-- Floating Buttons Container -->
<div class="fixed bottom-4 left-4 flex flex-row space-y-3 z-50">
  <!-- Back to Top Button -->
  <button 
    onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" 
    class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg transition duration-300" 
    aria-label="Back to Top">
    <!-- You can use an icon or text -->
    <i class="fa-solid fa-arrow-up h-5 w-6"></i>
  </button>
</div>

<div class="fixed bottom-4 right-4 flex flex-row space-y-3 z-50">
   <!-- Login Button -->
  {% if not request.session.guest_id %}
  <button id="openLoginBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-full shadow-lg text-center transition duration-300">Login</button>
  {% endif %}
</div>

{% comment %} login form {% endcomment %}
<!-- Modal wrapper -->
<div id="loginModal" class="fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity duration-300 ease-in-out">
  <!-- Modal content -->
  <div class="bg-white rounded-2xl shadow-lg p-8 max-w-sm w-full transform scale-95 transition-transform duration-300 ease-in-out relative">
    <!-- Close Button -->
    <button class="modal-close absolute top-4 right-4 text-black hover:text-gray-700">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    <!-- Logo/Header -->
    <div class="flex items-center mb-6">
      <img src="{{ MEDIA_URL }}NOVA DOORS HOTEL.png" alt="NOVA DOORS HOTEL" class="h-16">
    </div>
    <h2 class="text-2xl font-bold text-center mb-6">Get Started</h2>
    <!-- Login Form -->
    <form class="space-y-4" action="{% url 'guest_login' %}" method="POST" id="loginForm">
      {% csrf_token %}
      <div>
        <input type="text" id="login_username" name="username" required
               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500" 
               placeholder="Username">
        <span class="error-message text-red-500 text-sm hidden"></span>
      </div>
      <div>
        <input type="password" id="login_password" name="password" required
               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500" 
               placeholder="Password">
        <span class="error-message text-red-500 text-sm hidden"></span>
      </div>
      <div id="loginError" class="hidden text-red-500 text-sm text-center"></div>
      <div class="text-center">
        <button type="submit" 
                class="w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-2 px-4 rounded-md">
          Login
        </button>
      </div>
      <div class="text-center text-sm mt-2">
        <span class="text-gray-600">No account? </span>
        <a href="#" class="text-orange-500 hover:underline" id="openCreateAccountBtn">Create Account here!</a>
      </div>
    </form>
  </div>
</div>

{% comment %} create account form {% endcomment %}
<!-- Modal overlay -->
<div id="createAccountModal" class="fixed inset-0 backdrop-blur-sm bg-black/30 flex items-center justify-center z-50 opacity-0 transition-opacity duration-300 ease-in-out overflow-y-auto py-8">
  <!-- Modal content container -->
  <div class="bg-white rounded-2xl shadow-lg p-8 max-w-6xl w-full mx-4 my-auto relative transform scale-95 transition-all duration-300 ease-in-out">
    <!-- Close button -->
    <button class="modal-close absolute top-4 right-4 text-black hover:text-gray-700">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>

    <!-- Header/logo -->
    <div class="flex items-center mb-6">
      <img src="{{ MEDIA_URL }}NOVA DOORS HOTEL.png" alt="NOVA DOORS HOTEL" class="h-16">
    </div>

    <!-- Progress Steps -->
    <div class="mb-8">
      <div class="relative">
        <div class="w-full bg-gray-200 h-1 mb-6">
          <div class="progress-bar bg-orange-500 h-1 transition-all duration-300" style="width: 0%"></div>
        </div>
        <div class="flex justify-between">
          <span class="step-indicator text-sm font-medium" data-step="1">Personal Information</span>
          <span class="step-indicator text-sm font-medium text-gray-400" data-step="2">Account Setup</span>
          <span class="step-indicator text-sm font-medium text-gray-400" data-step="3">Complete</span>
        </div>
      </div>
      <h2 class="text-2xl font-bold text-center step-title mt-4">Personal Information</h2>
    </div>

    <!-- Multi-step Form -->
    <form id="createAccountForm" class="space-y-6" action="{% url 'register' %}" method="POST">
      {% csrf_token %}
      <div id="registrationError" class="hidden alert alert-error"></div>
      
      <!--Step 1: Personal Information -->
      <div class="step-content" id="step1">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="space-y-1">
            <label class="text-sm text-gray-600">First Name *</label>
            <input type="text" id="first_name" name="first_name" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="First Name">
            <span class="error-message">Please enter your first name</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Last Name *</label>
            <input type="text" id="last_name" name="last_name" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Last Name">
            <span class="error-message">Please enter your last name</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Middle Name</label>
            <input type="text" id="middle_name" name="middle_name"
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Middle Name">
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Email *</label>
            <input type="email" id="email" name="email" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Email">
            <span class="error-message">Please enter a valid email address</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Phone Number *</label>
            <input type="tel" id="phone_number" name="phone_number" min="1" maxlength="11" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Phone Number">
            <span class="error-message">Please enter a valid phone number</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Gender *</label>
            <select id="gender" name="gender" required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
              <option value="" disabled selected>Select gender</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Prefer not to say</option>
            </select>
            <span class="error-message">Please select your gender</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Date of Birth *</label>
            <input type="datetime" id="date_of_birth" name="date_of_birth" required
                   class="datepicker w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="YYYY-MM-DD">
            <span class="error-message">Please enter your date of birth</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Nationality *</label>
            <input type="text" id="nationality" name="nationality" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Nationality">
            <span class="error-message">Please enter your nationality</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Address *</label>
            <input type="text" id="address" name="address" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Complete Address">
            <span class="error-message">Please enter your address</span>
          </div>
        </div>
      </div>
      
      <!-- Step 2: Account Setup -->
      <div class="step-content hidden" id="step2">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Username *</label>
            <input type="text" id="username" name="username" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Username">
            <span class="error-message">Please enter a username</span>
          </div>
          <div></div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Password *</label>
            <input type="password" id="password" name="password" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Password">
            <span class="error-message">Please enter a password</span>
          </div>
          <div class="space-y-1">
            <label class="text-sm text-gray-600">Confirm Password *</label>
            <input type="password" id="confirm_password" name="confirm_password" required
                   class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                   placeholder="Confirm Password">
            <span class="error-message">Passwords do not match</span>
          </div>
        </div>
      </div>
      
      <!-- Step 3: Success Message -->
      <div class="step-content hidden text-center" id="step3">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
        </div>
        <h2 class="text-2xl font-bold text-green-500 mb-2">Congratulations!</h2>
        <p class="text-gray-600 mb-6">Your account has been created successfully</p>
        <div class="animate-pulse">Redirecting to home page...</div>
      </div>
      
      <!-- Navigation Buttons -->
      <div class="flex justify-between mt-8 space-x-4">
        <button type="button" id="prevBtn" 
                class="hidden px-8 py-3 bg-gray-500 hover:bg-gray-600 text-white font-medium rounded-md transition-all duration-300 flex items-center">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
          Back
        </button>
        <div class="flex-grow"></div>
        <button type="button" id="nextBtn" 
                class="px-8 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-md transition-all duration-300 flex items-center">
          Next
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </button>
        <button type="submit" id="createAccountBtn" 
                class="hidden px-8 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-md transition-all duration-300">
          Create Account
        </button>
      </div>
    </form>
  </div>
</div>

<footer class="bg-white dark:bg-gray-600">
    <div class="mx-auto w-full max-w-screen-xl p-4 py-6 lg:py-8">
        <div class="md:flex md:justify-between">
          <div class="mb-6 md:mb-0">
              <a href="#" class="flex items-center">
                  <img src="{{ MEDIA_URL }}NOVA DOORS HOTEL CUSTOMER PAGE.png" class="h-32" alt="Logo"/>
              </a>
          </div>
          <div class="grid grid-cols-2 gap-8 sm:gap-6 sm:space-x-24 sm:grid-cols-3">
              <div>
                  <h2 class="mb-2 text-sm font-semibold text-gray-900 uppercase dark:text-white">Location</h2>
                  <ul class="text-gray-500 dark:text-gray-400 font-medium space-y-2">
                      <li class="">
                          <p class="">Banica, Roxas City, <br>Capiz, Philippines</p>
                      </li>
                      <li>
                          <p>+63-9094848123</p>
                      </li>
                  </ul>
              </div>
              <div>
                  <h2 class="mb-2 text-sm font-semibold text-gray-600 uppercase dark:text-white">Legal</h2>
                  <ul class="text-gray-500 dark:text-gray-400 font-medium space-y-2">
                      <li class="">
                          <a href="#" class="hover:underline">Privacy Policy</a>
                      </li>
                      <li class="">
                          <a href="#" class="hover:underline">Cookie Policy</a>
                      </li>
                      <li>
                          <a href="#" class="hover:underline">Terms &amp; Conditions</a>
                      </li>
                  </ul>
              </div>
              <div>
                  <h2 class="mb-2 text-sm font-semibold text-gray-900 uppercase dark:text-white">Follow us</h2>
                  <ul class="text-gray-500 dark:text-gray-400 font-medium space-y-2">
                    <li>
                      <a href="#" class="text-gray-500 hover:text-gray-900 dark:hover:text-white ms-7">
                        <i class="fa-brands fa-square-facebook text-2xl"></i>
                        <span class="sr-only">Facebook page</span>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="text-gray-500 hover:text-gray-900 dark:hover:text-white ms-7">
                        <i class="fa-brands fa-square-instagram text-2xl"></i>
                        <span class="sr-only">Instagram</span>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="text-gray-500 hover:text-gray-900 dark:hover:text-white ms-7">
                        <i class="fa-brands fa-x-twitter text-2xl"></i>
                        <span class="sr-only">X</span>
                      </a>
                    </li>
                  </ul>
              </div>
          </div>
      </div>
      <hr class="my-6 sm:mx-auto border-gray-900 lg:my-4"/>
      <div class="sm:flex sm:items-center sm:justify-center">
          <span class="text-sm text-gray-500 sm:text-center justify-center dark:text-gray-400">© 2023 <a href="#home" class="hover:underline">Nova Doors Hotel™</a>. All Rights Reserved.
          </span>
      </div>
    </div>
</footer>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
{% comment %} script for feedback form {% endcomment %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('zapierFeedbackForm');

  form.addEventListener('submit', async function(event) {
    event.preventDefault();

    // Gather data from the form fields
    const email = document.getElementById('zapier_email').value;
    const name = document.getElementById('zapier_name').value;
    const feedback = document.getElementById('zapier_feedback').value;

    try {
      const response = await fetch("https://cors-anywhere.herokuapp.com/https://hooks.zapier.com/hooks/catch/23389223/uoy2q6o/", {
        method: 'POST',
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ name: name, email: email, message: feedback }),
      });

      if (response.ok) {
        alert("Feedback submitted successfully!");
        document.getElementById('zapierFeedbackForm').reset();
      } else {
        alert('Failed to submit feedback, Please try again.');
      }
    } catch (error) {
      console.error('Error:', error.message);
      alert('Sorry, there was an error submitting your feedback. Please try again.');
    }
  });
});
</script>

{% comment %} script for FAQ {% endcomment %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-hide messages after 5 seconds
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
      setTimeout(() => {
        alert.style.transform = 'translateX(100%)';
        setTimeout(() => alert.remove(), 500);
      }, 5000);
    });

    // Initialize Flatpickr
    flatpickr(".datepicker", {
      dateFormat: "Y-m-d",
      maxDate: "today",
      allowInput: true
    });

    // Modal Functions
    function showModal(modal) {
        modal.classList.remove('opacity-0', 'pointer-events-none');
        modal.classList.add('opacity-100', 'pointer-events-auto');
        const modalContent = modal.querySelector('div');
        modalContent.classList.remove('scale-95');
        modalContent.classList.add('scale-100');
    }

    function hideModal(modal) {
        const modalContent = modal.querySelector('div');
        modalContent.classList.remove('scale-100');
        modalContent.classList.add('scale-95');
        setTimeout(() => {
            modal.classList.remove('opacity-100', 'pointer-events-auto');
            modal.classList.add('opacity-0', 'pointer-events-none');
        }, 200);
    }

    // Get modal elements
    const loginModal = document.getElementById('loginModal');
    const createAccountModal = document.getElementById('createAccountModal');
    const loginBtn = document.getElementById('openLoginBtn');
    const createAccountLink = document.getElementById('openCreateAccountBtn');
    const closeButtons = document.querySelectorAll('.modal-close');
    const loginForm = document.getElementById('loginForm');
    const createAccountForm = document.getElementById('createAccountForm');

    // Multi-step form variables
    let currentStep = 1;
    const totalSteps = 3;
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const createAccountBtn = document.getElementById('createAccountBtn');
    const progressBar = document.querySelector('.progress-bar');
    const stepIndicators = document.querySelectorAll('.step-indicator');
    const stepTitle = document.querySelector('.step-title');

    // Function to update progress bar and step indicators
    function updateProgress() {
        const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
        progressBar.style.width = `${progress}%`;
        
        stepIndicators.forEach((indicator, index) => {
            if (index + 1 < currentStep) {
                indicator.classList.remove('text-gray-400');
                indicator.classList.add('text-orange-500');
            } else if (index + 1 === currentStep) {
                indicator.classList.remove('text-gray-400');
                indicator.classList.add('text-orange-500');
            } else {
                indicator.classList.add('text-gray-400');
                indicator.classList.remove('text-orange-500');
            }
        });

        // Update step title
        switch(currentStep) {
            case 1:
                stepTitle.textContent = 'Personal Information';
                break;
            case 2:
                stepTitle.textContent = 'Account Setup';
                break;
            case 3:
                stepTitle.textContent = 'Complete';
                break;
        }
    }

    // Function to validate current step
    function validateStep(step) {
        const requiredFields = document.querySelectorAll(`#step${step} input[required], #step${step} select[required]`);
        let isValid = true;

        requiredFields.forEach(field => {
            field.classList.remove('border-red-500');
            const errorMessage = field.nextElementSibling;
            if (errorMessage && errorMessage.classList.contains('error-message')) {
                errorMessage.classList.add('hidden');
            }

            if (!field.value.trim()) {
                isValid = false;
                field.classList.add('border-red-500');
                if (errorMessage) {
                    errorMessage.classList.remove('hidden');
                }
            }

            // Additional validation for specific fields
            if (field.id === 'email' && field.value) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(field.value)) {
                    isValid = false;
                    field.classList.add('border-red-500');
                    if (errorMessage) {
                        errorMessage.textContent = 'Please enter a valid email address';
                        errorMessage.classList.remove('hidden');
                    }
                }
            }

            if (field.id === 'phone_number' && field.value) {
                const phoneRegex = /^\+?[\d\s-]{10,}$/;
                if (!phoneRegex.test(field.value)) {
                    isValid = false;
                    field.classList.add('border-red-500');
                    if (errorMessage) {
                        errorMessage.textContent = 'Please enter a valid phone number';
                        errorMessage.classList.remove('hidden');
                    }
                }
            }

            if (step === 2) {
                if (field.id === 'password' && field.value) {
                    if (field.value.length < 8) {
                        isValid = false;
                        field.classList.add('border-red-500');
                        if (errorMessage) {
                            errorMessage.textContent = 'Password must be at least 8 characters long';
                            errorMessage.classList.remove('hidden');
                        }
                    }
                }
                if (field.id === 'confirm_password' && field.value) {
                    const password = document.getElementById('password').value;
                    if (field.value !== password) {
                        isValid = false;
                        field.classList.add('border-red-500');
                        if (errorMessage) {
                            errorMessage.textContent = 'Passwords do not match';
                            errorMessage.classList.remove('hidden');
                        }
                    }
                }
            }
        });

        return isValid;
    }

    // Function to show/hide steps
    function showStep(step) {
        document.querySelectorAll('.step-content').forEach(content => {
            content.classList.add('hidden');
        });
        const activeContent = document.getElementById(`step${step}`);
        if (activeContent) {
            activeContent.classList.remove('hidden');
        }

        // Update button visibility
        if (step === 1) {
            prevBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');
            createAccountBtn.classList.add('hidden');
        } else if (step === 2) {
            prevBtn.classList.remove('hidden');
            nextBtn.classList.add('hidden');
            createAccountBtn.classList.remove('hidden');
        } else if (step === 3) {
            prevBtn.classList.add('hidden');
            nextBtn.classList.add('hidden');
            createAccountBtn.classList.add('hidden');
        }

        // Clear any global error banner when switching steps
        const registrationError = document.getElementById('registrationError');
        if (registrationError) {
            registrationError.classList.add('hidden');
        }

        updateProgress();

        // Ensure modal scrolls to top for visibility of new content
        const modalWrapper = document.getElementById('createAccountModal');
        if (modalWrapper) {
            modalWrapper.scrollTop = 0;
        }
    }

    // Event listeners for navigation buttons
    if (nextBtn) {
        nextBtn.addEventListener('click', () => {
            if (validateStep(currentStep)) {
                currentStep++;
                showStep(currentStep);
            }
        });
    }

    if (prevBtn) {
        prevBtn.addEventListener('click', () => {
            currentStep--;
            showStep(currentStep);
        });
    }

    // Handle form submission
    if (createAccountForm) {
        createAccountForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateStep(currentStep)) {
                return;
            }

            const formData = new FormData(createAccountForm);
            const registrationError = document.getElementById('registrationError');
            const csrftoken = getCookie('csrftoken');
            
            createAccountBtn.disabled = true; // prevent double-submit

            fetch(createAccountForm.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': csrftoken
                }
            })
            .then(response => {
                // If response is not JSON (e.g., 403), throw error
                return response.json().catch(() => {
                    throw new Error('Invalid server response');
                });
            })
            .then(data => {
                console.log('Registration response:', data);
                if (data.success) {
                    currentStep = 3;
                    showStep(currentStep);
                    setTimeout(() => {
                        window.location.href = data.redirect_url;
                    }, 2000);
                } else {
                    if (registrationError) {
                        registrationError.textContent = data.error || 'Registration failed.';
                        registrationError.classList.remove('hidden');
                        registrationError.classList.add('alert', 'alert-error');
                    }

                    // If it's a password error, highlight the password fields
                    if (data.error && data.error.toLowerCase().includes('password')) {
                        const passwordField = document.getElementById('password');
                        const confirmPasswordField = document.getElementById('confirm_password');
                        
                        if (passwordField) {
                            passwordField.classList.add('border-red-500');
                            const errorMessage = passwordField.nextElementSibling;
                            if (errorMessage && errorMessage.classList.contains('error-message')) {
                                errorMessage.textContent = data.error;
                                errorMessage.classList.remove('hidden');
                            }
                        }
                        if (confirmPasswordField) {
                            confirmPasswordField.classList.add('border-red-500');
                        }
                    }
                }
            })
            .catch(error => {
                if (registrationError) {
                    registrationError.textContent = error.message || 'An error occurred. Please try again.';
                    registrationError.classList.remove('hidden');
                    registrationError.classList.add('alert', 'alert-error');
                }
            })
            .finally(() => {
                createAccountBtn.disabled = false;
            });
        });
        
        // Clear errors when user starts typing
        createAccountForm.querySelectorAll('input, select').forEach(field => {
            field.addEventListener('input', function() {
                this.classList.remove('border-red-500');
                const errorMessage = this.nextElementSibling;
                if (errorMessage && errorMessage.classList.contains('error-message')) {
                    errorMessage.classList.add('hidden');
                }
                const registrationError = document.getElementById('registrationError');
                if (registrationError) {
                    registrationError.classList.add('hidden');
                }
            });
        });
    }

    // Add click event for login button
    if (loginBtn) {
        loginBtn.addEventListener('click', () => {
            if (loginModal) {
                showModal(loginModal);
            }
        });
    }

    // Add click event for create account link
    if (createAccountLink) {
        createAccountLink.addEventListener('click', (e) => {
            e.preventDefault();
            if (loginModal) {
                hideModal(loginModal);
            }
            setTimeout(() => {
                if (createAccountModal) {
                    showModal(createAccountModal);
                    currentStep = 1;
                    showStep(1);
                }
            }, 300);
        });
    }

    // Add click events for close buttons
    if (closeButtons) {
        closeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const modal = button.closest('[id$="Modal"]');
                if (modal) {
                    hideModal(modal);
                }
            });
        });
    }

    // Close on outside click
    window.addEventListener('click', (e) => {
        if (e.target.matches('[id$="Modal"]')) {
            hideModal(e.target);
        }
    });

    // Handle login form submission
    if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Reset error states
            const loginError = document.getElementById('loginError');
            if (loginError) {
                loginError.classList.add('hidden');
            }

            // Reset all error messages and styles
            document.querySelectorAll('.error-message').forEach(msg => {
                if (msg) {
                    msg.classList.add('hidden');
                }
            });

            document.querySelectorAll('input').forEach(input => {
                if (input) {
                    input.classList.remove('border-red-500');
                    input.classList.remove('ring-red-500');
                }
            });
            
            const formData = new FormData(loginForm);
            
            fetch(loginForm.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = data.redirect_url;
                } else {
                    // Show error message
                    if (data.field) {
                        // Field-specific error
                        const input = document.getElementById('login_' + data.field);
                        if (input) {
                            const errorSpan = input.nextElementSibling;
                            input.classList.add('border-red-500');
                            input.classList.add('ring-red-500');
                            if (errorSpan) {
                                errorSpan.textContent = data.error;
                                errorSpan.classList.remove('hidden');
                            }
                        }
                    } else {
                        // General error
                        const loginError = document.getElementById('loginError');
                        if (loginError) {
                            loginError.textContent = data.error;
                            loginError.classList.remove('hidden');
                        }
                    }

                    // Retain form data if provided
                    if (data.formData) {
                        Object.keys(data.formData).forEach(key => {
                            const input = document.getElementById('login_' + key);
                            if (input) {
                                input.value = data.formData[key];
                            }
                        });
                    }
                }
            })
            .catch(error => {
                const loginError = document.getElementById('loginError');
                if (loginError) {
                    loginError.textContent = 'An error occurred. Please try again.';
                    loginError.classList.remove('hidden');
                }
            });
        });
        
        // Clear errors when user starts typing
        loginForm.querySelectorAll('input').forEach(input => {
            if (input) {
                input.addEventListener('input', function() {
                    this.classList.remove('border-red-500');
                    this.classList.remove('ring-red-500');
                    const nextSibling = this.nextElementSibling;
                    if (nextSibling) {
                        nextSibling.classList.add('hidden');
                    }
                    const loginError = document.getElementById('loginError');
                    if (loginError) {
                        loginError.classList.add('hidden');
                    }
                });
            }
        });
    }

    // FAQ functionality
    window.toggleFAQ = function(headerElement) {
        if (!headerElement) return;
        
        const icon = headerElement.querySelector('i');
        const paragraph = headerElement.nextElementSibling;
        
        if (paragraph && icon) {
            paragraph.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        }
    };

    // Utility: Get Django CSRF token from cookie
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return '';
    }
});
</script>
{% endblock scripts %}

{% block styles %}
<style>
@keyframes slideIn {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

.animate-slide-in {
  animation: slideIn 0.5s ease-out;
}

/* Add these styles for the progress bar animation */
.progress-bar {
  transition: width 0.3s ease-in-out;
}

.step-indicator {
  transition: color 0.3s ease-in-out;
}

/* Add styles for form validation */
.error-message {
  color: #ef4444;
  font-size: 0.875rem;
  margin-top: 0.25rem;
}

input.border-red-500,
select.border-red-500 {
  border-color: #ef4444;
}

input.border-red-500:focus,
select.border-red-500:focus {
  border-color: #ef4444;
  box-shadow: 0 0 0 1px #ef4444;
}
</style>
{% endblock styles %}